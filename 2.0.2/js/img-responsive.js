define("fb/img-responsive/img-srcset",[],function(){"use strict";function e(e){this.src=e.src,this.w=e.w||1/0,this.h=e.h||1/0,this.x=e.x||1}var r={w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight,x:window.devicePixelRatio},t=function(e){r.w=e.width,r.h=e.height},n=/^[0-9]+$/,s=function(e){for(var r=e.split(/\s/),t={},s=0,i=r.length;s<i;s++){var a=r[s];if(a.length>0){var c=a.slice(-1),o=a.substring(0,a.length-1),f=parseInt(o,10),l=parseFloat(o);o.match(n)&&"w"===c?t[c]=f:o.match(n)&&"h"===c?t[c]=f:isNaN(l)||"x"!==c||(t[c]=l)}}return t},i=function(e,r){for(var t=e[0],n=0,s=e.length;n<s;n++){var i=e[n];r(i,t)&&(t=i)}return t},a=function(e,r){for(var t=e.length-1;t>=0;t--){r(e[t])&&e.splice(t,1)}return e},c=function(e,t){if(e){var n=e.slice(0),s=t||r.w,c=i(n,function(e,r){return e.w>r.w});a(n,function(){return function(e){return e.w<s}}()),0===n.length&&(n=[c]);var o=i(n,function(e,r){return e.h>r.h});a(n,function(){return function(e){return e.h<r.h}}()),0===n.length&&(n=[o]);var f=i(n,function(e,r){return e.x>r.x});a(n,function(){return function(e){return e.x<r.x}}()),0===n.length&&(n=[f]);var l=i(n,function(e,r){return e.w<r.w});a(n,function(e){return e.w>l.w});var u=i(n,function(e,r){return e.h<r.h});a(n,function(e){return e.h>u.h});var g=i(n,function(e,r){return e.x<r.x});return a(n,function(e){return e.x>g.x}),n[0]}};return{get:function(r){var t=[],n=r.src,i=r.srcset,a=r.width;if(i){var o=function(e){for(var r=0,n=t.length;r<n;r++){var s=t[r];if(s.x===e.x&&s.w===e.w&&s.h===e.h)return}t.push(e)};!function(){for(var r,t,a=i,c=0,f=[];""!==a;){for(;" "===a.charAt(0);)a=a.slice(1);if(-1!==(c=a.indexOf(" "))){if(""===(r=a.slice(0,c)))break;a=a.slice(c+1),c=a.indexOf(","),-1===c?(t=a,a=""):(t=a.slice(0,c),a=a.slice(c+1)),f.push({url:r,descriptors:t})}else f.push({url:a,descriptors:""}),a=""}for(var l=0,u=f.length;l<u;l++){var g=f[l],h=s(g.descriptors);o(new e({src:g.url,x:h.x,w:h.w,h:h.h}))}n&&o(new e({src:n}))}();var f=c(t,a),l={best:f,candidates:t};return t=null,l}},image:c,setView:t}}),define("fb/img-responsive",["fb/jquery","fb/img-responsive/img-srcset","fb/window-events"],function(e,r,t){"use strict";var n=e(window),s=[],i=100,a=!1,c=/url\(|\)|"|'/g,o=function(){return"srcset"in new Image}(),f=function(r,t){if(0!==s.length){var a,c;t?(a=t.scrollTop,c=t.height):(a=n.scrollTop(),c=n.height());var o=e.grep(s,function(r){if(null!==r){var t=e(r),n=parseInt(a,10),s=n+parseInt(c,10),o=parseInt(t.offset().top,10);return o+parseInt(t.parent().height(),10)>=n-i&&o<=s+i}});if(o.length>0)for(var f=o.length;f--;){var l=e(o[f]);l.addClass("fb-img-loading").trigger("fb.img.lazy"),l=null}}},l=function(){var t,n,s,i=e(this),a=!1;switch(i.attr("data-img-type")||"replace"){case"background":var o=i.css("background-image");n=i.attr("data-srcset"),s=o.replace(c,""),a=!0;break;case"native":t=i,n=i.attr("srcset"),s=t.attr("src");break;default:t=i.find(".fb-img-replace-me"),n=i.attr("data-srcset"),s=t.attr("src")}var f=new r.get({srcset:n});s!==f.best.src&&(a?i.css("background-image","url("+f.best.src+")"):0!==t.length&&t.attr("src",f.best.src))},u=function(t,n){r.setView(n),e(".fb-img-done").each(l),f()},g=function(){var r=e(this),t=r.find(".fb-img-replace-me");if(1===t.length&&t.remove(),r.remove(),s.length>0)for(var n=s.length-1;n--;)null===s[n]&&s.splice(n,1);t=r=null},h=function(r){if(r&&r.container){var t=e(r.container).find(".js-fb-img");if(0!==t.length){if(s.length>0)for(var n=s.length;n--;){var i=e(s[n]).closest(r.container).length;1===i&&(s[n]=null)}t.each(g),t=null}}},d=function(e,t){var n=new r.get({srcset:e}),s="fb-img-replace-me";t&&(s+=" "+t);var i;return n&&n.best&&n.best.src&&(i='<img src="'+n.best.src+'" class="'+s+'"/>'),i},m=function(t){var n=e(t),s=n.attr("data-srcset"),i=new r.get({srcset:s});if(i&&i.best&&i.best.src){var a='<img src="'+i.best.src+'" class="fb-img-replace-me"/>';e(a).one("load",function(){n.removeClass("fb-img-loading")}),n.empty().append(a)}else n.removeClass("fb-img-loading fb-img-done")},b=function(t){var n=e(t),s=n.attr("data-srcset"),i=new r.get({srcset:s});i&&i.best&&i.best.src?n.css("background-image","url("+i.best.src+")"):n.removeClass("fb-img-done")},v=function(t){var n=e(t);s.push(t),n.one("fb.img.lazy",function(){var i=new r.get({srcset:n.attr("data-srcset")});if(i&&i.best&&i.best.src){var a='<img src="'+i.best.src+'" class="fb-img-replace-me"/>';e(a).one("load",function(){n.removeClass("fb-img-loading")}),n.empty().append(a);var c=e.inArray(t,s);-1!==c&&s.splice(c,1)}else n.removeClass("fb-img-loading fb-img-done")})},p=function(t){var n=e(t);if(!n.replaced){n.replaced=!0;var s=new r.get({src:n.attr("src"),srcset:n.attr("srcset")});if(s&&s.best&&s.best.src){if(n.attr("src")===s.best.src)return;n.attr("src",s.best.src)}else n.removeClass("fb-img-loading fb-img-done");n=null}},w=function(){var r=e(this);switch(r.attr("data-img-type")||"replace"){case"replace":r.addClass("fb-img-loading fb-img-done"),m(this);break;case"lazy":r.is(":hidden")||(r.addClass("fb-img-done"),v(this));break;case"background":r.addClass("fb-img-done"),b(this);break;case"native":if(o)return;r.addClass("fb-img-done"),p(this)}},x=function(r){var n=".js-fb-img:not('.fb-img-done')",s=r&&r.container?e(r.container).addBack().find(n):e(n);r&&r.threshold&&(i=r.threshold),s.each(w),a||(a=!0,t.onScroll(f),t.onResize(u)),f()};return{init:x,crawl:function(e){x(e)},html:d,clean:h}});