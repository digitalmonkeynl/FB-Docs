define("fb/lodash",[],function(){function t(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function e(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var s=n[i],a=r[i];if(s!==a){if(s>a||void 0===s)return 1;if(s<a||void 0===a)return-1}}return t.index-e.index}function n(t){return"\\"+Ie[t]}function r(){return he.pop()||[]}function i(t){t.length=0,he.length<ve&&he.push(t)}function o(t,e,n){e||(e=0),void 0===n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}function s(t){return t instanceof s?t:new a(t)}function a(t,e){this.__chain__=!!e,this.__wrapped__=t}function u(t){function e(){if(r){var t=o(r);We.apply(t,arguments)}if(this instanceof e){var s=c(n.prototype),a=n.apply(s,t||arguments);return q(a)?a:s}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return e}function l(t,e,n,s,a){if(n){var u=n(t);if(void 0!==u)return u}if(!q(t))return t;var c=qe.call(t);if(!Se[c])return t;var h=nn[c];switch(c){case xe:case Ee:return new h(+t);case je:case Ae:return new h(t);case ke:return u=h(t.source,ge.exec(t)),u.lastIndex=t.lastIndex,u}var f=sn(t);if(e){var p=!s;s||(s=r()),a||(a=r());for(var d=s.length;d--;)if(s[d]==t)return a[d];u=f?h(t.length):{}}else u=f?o(t):A({},t);return f&&(Le.call(t,"index")&&(u.index=t.index),Le.call(t,"input")&&(u.input=t.input)),e?(s.push(t),a.push(u),(f?rt:gn)(t,function(t,r){u[r]=l(t,e,n,s,a)}),p&&(i(s),i(a)),u):u}function c(t,e){return q(t)?Ve(t):{}}function h(t,e,n){if("function"!=typeof t)return Kt;if(void 0===e||!("prototype"in t))return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return Ft(t,e)}function f(t){function e(){var t=l?a:this;if(i){var g=o(i);We.apply(g,arguments)}if((s||p)&&(g||(g=o(arguments)),s&&We.apply(g,s),p&&g.length<u))return r|=16,f([n,d?r:-4&r,g,null,a,u]);if(g||(g=arguments),h&&(n=t[v]),this instanceof e){t=c(n.prototype);var y=n.apply(t,g);return q(y)?y:t}return n.apply(t,g)}var n=t[0],r=t[1],i=t[2],s=t[3],a=t[4],u=t[5],l=1&r,h=2&r,p=4&r,d=8&r,v=n;return e}function p(t,e){for(var n=-1,r=x(),i=t?t.length:0,o=[];++n<i;){var s=t[n];r(e,s)<0&&o.push(s)}return o}function d(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,s=[];++i<o;){var a=t[i];if(a&&"object"==typeof a&&"number"==typeof a.length&&(sn(a)||k(a))){e||(a=d(a,e,n));var u=-1,l=a.length,c=s.length;for(s.length+=l;++u<l;)s[c++]=a[u]}else n||s.push(a)}return s}function v(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;var i=typeof t,o=typeof e;if(!(t!==t||t&&$e[i]||e&&$e[o]))return!1;if(null==t||null==e)return t===e;var a=qe.call(t);if(a!=qe.call(e))return!1;switch(a){case xe:case Ee:return+t==+e;case je:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case ke:case Ae:return t==String(e)}var u=a==we;if(!u){var l=t instanceof s,c=e instanceof s;if(l||c)return v(l?t.__wrapped__:t,c?e.__wrapped__:e,n,r);if(a!=Te)return!1;var h=t.constructor,f=e.constructor;if(h!=f&&!(M(h)&&h instanceof h&&M(f)&&f instanceof f)&&"constructor"in t&&"constructor"in e)return!1}n||(n=[]),r||(r=[]);for(var p=n.length;p--;)if(n[p]==t)return r[p]==e;var d=!0,g=0;if(n.push(t),r.push(e),u){if(g=e.length,d=g==t.length)for(;g--&&(d=v(t[g],e[g],n,r)););}else vn(e,function(e,i,o){if(Le.call(o,i))return g++,d=Le.call(t,i)&&v(t[i],e,n,r)}),d&&vn(t,function(t,e,n){if(Le.call(n,e))return d=--g>-1});return n.pop(),r.pop(),d}function g(t,e,n,r,i){(sn(e)?rt:gn)(e,function(e,o){var s,a,u=e,l=t[o];if(e&&((a=sn(e))||yn(e))){for(var c=r.length;c--;)if(s=r[c]==e){l=i[c];break}if(!s){var h;n&&(u=n(l,e),(h=void 0!==u)&&(l=u)),h||(l=a?sn(l)?l:[]:yn(l)?l:{}),r.push(e),i.push(l),h||g(l,e,n,r,i)}}else n&&void 0===(u=n(l,e))&&(u=e),void 0!==u&&(l=u);t[o]=l})}function y(t,e){return t+Je(en()*(e-t+1))}function m(t,e,n){for(var r=-1,i=x(),o=t?t.length:0,s=[],a=n?[]:s;++r<o;){var u=t[r],l=n?n(u,r,t):u;(e?!r||a[a.length-1]!==l:i(a,l)<0)&&(n&&a.push(l),s.push(u))}return s}function b(t){return function(e,n,r){var i={};n=Vt(n,r,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var a=e[o];t(i,a,n(a,o,e),e)}else gn(e,function(e,r,o){t(i,e,n(e,r,o),o)});return i}}function _(t,e,n,r,i,o){var s=2&e,a=16&e,l=32&e;if(!s&&!M(t))throw new TypeError;return a&&!n.length&&(e&=-17,a=n=!1),l&&!r.length&&(e&=-33,l=r=!1),(1==e||17===e?u:f)([t,e,n,r,i,o])}function w(t){return hn[t]}function x(){var e=(e=s.indexOf)===Et?t:e;return e}function E(t){return"function"==typeof t&&Be.test(t)}function j(t){var e,n;return!!(t&&qe.call(t)==Te&&(e=t.constructor,!M(e)||e instanceof e))&&(vn(t,function(t,e){n=e}),void 0===n||Le.call(t,n))}function T(t){return fn[t]}function k(t){return t&&"object"==typeof t&&"number"==typeof t.length&&qe.call(t)==_e||!1}function A(t){if(!t)return t;for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];if(r)for(var i in r)t[i]=r[i]}return t}function S(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),l(t,e,"function"==typeof n&&h(n,r,1))}function O(t){if(!t)return t;for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e];if(r)for(var i in r)void 0===t[i]&&(t[i]=r[i])}return t}function $(t){var e=[];return vn(t,function(t,n){M(t)&&e.push(n)}),e.sort()}function I(t,e){return!!t&&Le.call(t,e)}function N(t){for(var e=-1,n=un(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function P(t){return!0===t||!1===t||t&&"object"==typeof t&&qe.call(t)==xe||!1}function H(t){return t&&"object"==typeof t&&qe.call(t)==Ee||!1}function R(t){return t&&1===t.nodeType||!1}function C(t){if(!t)return!0;if(sn(t)||L(t))return!t.length;for(var e in t)if(Le.call(t,e))return!1;return!0}function F(t,e){return v(t,e)}function U(t){return Ke(t)&&!Qe(parseFloat(t))}function M(t){return"function"==typeof t}function q(t){return!(!t||!$e[typeof t])}function B(t){return J(t)&&t!=+t}function z(t){return null===t}function J(t){return"number"==typeof t||t&&"object"==typeof t&&qe.call(t)==je||!1}function D(t){return t&&$e[typeof t]&&qe.call(t)==ke||!1}function L(t){return"string"==typeof t||t&&"object"==typeof t&&qe.call(t)==Ae||!1}function W(t){return void 0===t}function X(t){var e=arguments,n=2;if(!q(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var s=h(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(s=e[--n]);for(var a=o(arguments,1,n),u=-1,l=r(),c=r();++u<n;)g(t,a[u],s,l,c);return i(l),i(c),t}function V(t){var e=[];vn(t,function(t,n){e.push(n)}),e=p(e,d(arguments,!0,!1,1));for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];i[o]=t[o]}return i}function G(t){for(var e=-1,n=un(t),r=n.length,i=Array(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function K(t){for(var e=-1,n=d(arguments,!0,!1,1),r=n.length,i={};++e<r;){var o=n[e];o in t&&(i[o]=t[o])}return i}function Q(t){for(var e=-1,n=un(t),r=n.length,i=Array(r);++e<r;)i[e]=t[n[e]];return i}function Y(t,e){var n=x(),r=t?t.length:0,i=!1;return r&&"number"==typeof r?i=n(t,e)>-1:gn(t,function(t){return!(i=t===e)}),i}function Z(t,e,n){var r=!0;e=Vt(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&(r=!!e(t[i],i,t)););else gn(t,function(t,n,i){return r=!!e(t,n,i)});return r}function tt(t,e,n){var r=[];e=Vt(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o;){var s=t[i];e(s,i,t)&&r.push(s)}else gn(t,function(t,n,i){e(t,n,i)&&r.push(t)});return r}function et(t,e,n){e=Vt(e,n,3);var r=-1,i=t?t.length:0;if("number"!=typeof i){var o;return gn(t,function(t,n,r){if(e(t,n,r))return o=t,!1}),o}for(;++r<i;){var s=t[r];if(e(s,r,t))return s}}function nt(t,e){return mt(t,e,!0)}function rt(t,e,n){var r=-1,i=t?t.length:0;if(e=e&&void 0===n?e:h(e,n,3),"number"==typeof i)for(;++r<i&&!1!==e(t[r],r,t););else gn(t,e)}function it(t,e){var n=t?t.length:0;if("number"==typeof n)for(;n--&&!1!==e(t[n],n,t););else{var r=un(t);n=r.length,gn(t,function(t,i,o){return i=r?r[--n]:--n,e(o[i],i,o)})}}function ot(t,e){var n=o(arguments,2),r=-1,i="function"==typeof e,s=t?t.length:0,a=Array("number"==typeof s?s:0);return rt(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function st(t,e,n){var r=-1,i=t?t.length:0;if(e=Vt(e,n,3),"number"==typeof i)for(var o=Array(i);++r<i;)o[r]=e(t[r],r,t);else o=[],gn(t,function(t,n,i){o[++r]=e(t,n,i)});return o}function at(t,e,n){var r=-1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;){var a=t[o];a>i&&(i=a)}else e=Vt(e,n,3),rt(t,function(t,n,o){var s=e(t,n,o);s>r&&(r=s,i=t)});return i}function ut(t,e,n){var r=1/0,i=r;"function"!=typeof e&&n&&n[e]===t&&(e=null);var o=-1,s=t?t.length:0;if(null==e&&"number"==typeof s)for(;++o<s;){var a=t[o];a<i&&(i=a)}else e=Vt(e,n,3),rt(t,function(t,n,o){var s=e(t,n,o);s<r&&(r=s,i=t)});return i}function lt(t,e,n,r){if(!t)return n;var i=arguments.length<3;e=Vt(e,r,4);var o=-1,s=t.length;if("number"==typeof s)for(i&&(n=t[++o]);++o<s;)n=e(n,t[o],o,t);else gn(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)});return n}function ct(t,e,n,r){var i=arguments.length<3;return e=Vt(e,r,4),it(t,function(t,r,o){n=i?(i=!1,t):e(n,t,r,o)}),n}function ht(t,e,n){return e=Vt(e,n,3),tt(t,function(t,n,r){return!e(t,n,r)})}function ft(t,e,n){if(t&&"number"!=typeof t.length&&(t=Q(t)),null==e||n)return t?t[y(0,t.length-1)]:ce;var r=pt(t);return r.length=tn(Ze(0,e),r.length),r}function pt(t){var e=-1,n=t?t.length:0,r=Array("number"==typeof n?n:0);return rt(t,function(t){var n=y(0,++e);r[e]=r[n],r[n]=t}),r}function dt(t){var e=t?t.length:0;return"number"==typeof e?e:un(t).length}function vt(t,e,n){var r;e=Vt(e,n,3);var i=-1,o=t?t.length:0;if("number"==typeof o)for(;++i<o&&!(r=e(t[i],i,t)););else gn(t,function(t,n,i){return!(r=e(t,n,i))});return!!r}function gt(t,n,r){var i=-1,o=t?t.length:0,s=Array("number"==typeof o?o:0);for(n=Vt(n,r,3),rt(t,function(t,e,r){s[++i]={criteria:[n(t,e,r)],index:i,value:t}}),o=s.length,s.sort(e);o--;)s[o]=s[o].value;return s}function yt(t){return sn(t)?o(t):t&&"number"==typeof t.length?st(t):Q(t)}function mt(t,e,n){return n&&C(e)?ce:(n?et:tt)(t,e)}function bt(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function _t(t){return p(t,d(arguments,!0,!0,1))}function wt(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var s=-1;for(e=Vt(e,n,3);++s<i&&e(t[s],s,t);)r++}else if(null==(r=e)||n)return t?t[0]:ce;return o(t,0,tn(Ze(0,r),i))}function xt(t,e){return d(t,e)}function Et(e,n,r){if("number"==typeof r){var i=e?e.length:0;r=r<0?Ze(0,i+r):r||0}else if(r){var o=$t(e,n);return e[o]===n?o:-1}return t(e,n,r)}function jt(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var s=i;for(e=Vt(e,n,3);s--&&e(t[s],s,t);)r++}else r=null==e||n?1:e||r;return o(t,0,tn(Ze(0,i-r),i))}function Tt(){for(var t=[],e=-1,n=arguments.length;++e<n;){var r=arguments[e];(sn(r)||k(r))&&t.push(r)}var i=t[0],o=-1,s=x(),a=i?i.length:0,u=[];t:for(;++o<a;)if(r=i[o],s(u,r)<0){for(var e=n;--e;)if(s(t[e],r)<0)continue t;u.push(r)}return u}function kt(t,e,n){var r=0,i=t?t.length:0;if("number"!=typeof e&&null!=e){var s=i;for(e=Vt(e,n,3);s--&&e(t[s],s,t);)r++}else if(null==(r=e)||n)return t?t[i-1]:ce;return o(t,Ze(0,i-r))}function At(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(n<0?Ze(0,r+n):tn(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function St(t,e,n){t=+t||0,n=+n||1,null==e&&(e=t,t=0);for(var r=-1,i=Ze(0,ze((e-t)/n)),o=Array(i);++r<i;)o[r]=t,t+=n;return o}function Ot(t,e,n){if("number"!=typeof e&&null!=e){var r=0,i=-1,s=t?t.length:0;for(e=Vt(e,n,3);++i<s&&e(t[i],i,t);)r++}else r=null==e||n?1:Ze(0,e);return o(t,r)}function $t(t,e,n,r){var i=0,o=t?t.length:i;for(n=n?Vt(n,r,1):Kt,e=n(e);i<o;){var s=i+o>>>1;n(t[s])<e?i=s+1:o=s}return i}function It(){return m(d(arguments,!0,!0))}function Nt(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(n=Vt(n,r,3)),m(t,e,n)}function Pt(t){return p(t,o(arguments,1))}function Ht(){for(var t=-1,e=at(wn(arguments,"length")),n=Array(e<0?0:e);++t<e;)n[t]=wn(arguments,t);return n}function Rt(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||sn(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Ct(t,e){if(!M(e))throw new TypeError;return function(){if(--t<1)return e.apply(this,arguments)}}function Ft(t,e){return arguments.length>2?_(t,17,o(arguments,2),null,e):_(t,1,null,null,e)}function Ut(t){for(var e=arguments.length>1?d(arguments,!0,!1,1):$(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=_(t[i],1,null,null,t)}return t}function Mt(){for(var t=arguments,e=t.length;e--;)if(!M(t[e]))throw new TypeError;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function qt(t,e,n){var r,i,o,s,a,u,l,c=0,h=!1,f=!0;if(!M(t))throw new TypeError;if(e=Ze(0,e)||0,!0===n){var p=!0;f=!1}else q(n)&&(p=n.leading,h="maxWait"in n&&(Ze(e,n.maxWait)||0),f="trailing"in n?n.trailing:f);var d=function(){var n=e-(xn()-s);if(n<=0){i&&clearTimeout(i);var h=l;i=u=l=ce,h&&(c=xn(),o=t.apply(a,r),u||i||(r=a=null))}else u=setTimeout(d,n)},v=function(){u&&clearTimeout(u),i=u=l=ce,(f||h!==e)&&(c=xn(),o=t.apply(a,r),u||i||(r=a=null))};return function(){if(r=arguments,s=xn(),a=this,l=f&&(u||!p),!1===h)var n=p&&!u;else{i||p||(c=s);var g=h-(s-c),y=g<=0;y?(i&&(i=clearTimeout(i)),c=s,o=t.apply(a,r)):i||(i=setTimeout(v,g))}return y&&u?u=clearTimeout(u):u||e===h||(u=setTimeout(d,e)),n&&(y=!0,o=t.apply(a,r)),!y||u||i||(r=a=null),o}}function Bt(t){if(!M(t))throw new TypeError;var e=o(arguments,1);return setTimeout(function(){t.apply(ce,e)},1)}function zt(t,e){if(!M(t))throw new TypeError;var n=o(arguments,2);return setTimeout(function(){t.apply(ce,n)},e)}function Jt(t,e){var n={};return function(){var r=e?e.apply(this,arguments):de+arguments[0];return Le.call(n,r)?n[r]:n[r]=t.apply(this,arguments)}}function Dt(t){var e,n;if(!M(t))throw new TypeError;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Lt(t){return _(t,16,o(arguments,1))}function Wt(t,e,n){var r=!0,i=!0;if(!M(t))throw new TypeError;return!1===n?r=!1:q(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),n={},n.leading=r,n.maxWait=e,n.trailing=i,qt(t,e,n)}function Xt(t,e){return _(e,16,[t])}function Vt(t,e,n){var r=typeof t;if(null==t||"function"==r)return h(t,e,n);if("object"!=r)return Zt(t);var i=un(t);return function(e){for(var n=i.length,r=!1;n--&&(r=e[i[n]]===t[i[n]]););return r}}function Gt(t){return null==t?"":String(t).replace(dn,w)}function Kt(t){return t}function Qt(t){rt($(t),function(e){var n=s[e]=t[e];s.prototype[e]=function(){var t=[this.__wrapped__];We.apply(t,arguments);var e=n.apply(s,t);return this.__chain__?new a(e,!0):e}})}function Yt(){return Ne._=Me,this}function Zt(t){return function(e){return e[t]}}function te(t,e){return null==t&&null==e&&(e=1),t=+t||0,null==e?(e=t,t=0):e=+e||0,t+Je(en()*(e-t+1))}function ee(t,e){if(t){var n=t[e];return M(n)?t[e]():n}}function ne(t,e,r){var i=s,o=i.templateSettings;t=String(t||""),r=O({},r,o);var a=0,u="__p += '",l=r.variable,c=RegExp((r.escape||me).source+"|"+(r.interpolate||me).source+"|"+(r.evaluate||me).source+"|$","g");t.replace(c,function(e,r,i,o,s){return u+=t.slice(a,s).replace(be,n),r&&(u+="' +\n_.escape("+r+") +\n'"),o&&(u+="';\n"+o+";\n__p += '"),i&&(u+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),a=s+e.length,e}),u+="';\n",l||(l="obj",u="with ("+l+" || {}) {\n"+u+"\n}\n"),u="function("+l+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+u+"return __p\n}";try{var h=Function("_","return "+u)(i)}catch(t){throw t.source=u,t}return e?h(e):(h.source=u,h)}function re(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=Array(t);for(e=h(e,n,1);++r<t;)i[r]=e(r);return i}function ie(t){return null==t?"":String(t).replace(pn,T)}function oe(t){var e=++fe+"";return t?t+e:e}function se(t){return t=new a(t),t.__chain__=!0,t}function ae(t,e){return e(t),t}function ue(){return this.__chain__=!0,this}function le(){return this.__wrapped__}var ce,he=[],fe=0,pe={},de=+new Date+"",ve=40,ge=/\w*$/,ye=/<@=([\s\S]+?)@>/g,me=/($^)/,be=/['\n\r\t\u2028\u2029\\]/g,_e="[object Arguments]",we="[object Array]",xe="[object Boolean]",Ee="[object Date]",je="[object Number]",Te="[object Object]",ke="[object RegExp]",Ae="[object String]",Se={};Se["[object Function]"]=!1,Se[_e]=Se[we]=Se[xe]=Se[Ee]=Se[je]=Se[Te]=Se[ke]=Se[Ae]=!0;var Oe={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},$e={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},Ie={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},Ne=$e[typeof window]&&window||this,Pe=$e[typeof exports]&&exports&&!exports.nodeType&&exports,He=$e[typeof module]&&module&&!module.nodeType&&module,Re=(He&&He.exports,$e[typeof global]&&global);!Re||Re.global!==Re&&Re.window!==Re||(Ne=Re);var Ce=[],Fe=Object.prototype,Ue=String.prototype,Me=Ne._,qe=Fe.toString,Be=RegExp("^"+String(qe).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ze=Math.ceil,Je=Math.floor,De=E(De=Object.getPrototypeOf)&&De,Le=Fe.hasOwnProperty,We=Ce.push,Xe=Fe.propertyIsEnumerable,Ve=E(Ve=Object.create)&&Ve,Ge=E(Ge=Array.isArray)&&Ge,Ke=Ne.isFinite,Qe=Ne.isNaN,Ye=E(Ye=Object.keys)&&Ye,Ze=Math.max,tn=Math.min,en=Math.random,nn={};nn[we]=Array,nn[xe]=Boolean,nn[Ee]=Date,nn["[object Function]"]=Function,nn[Te]=Object,nn[je]=Number,nn[ke]=RegExp,nn[Ae]=String,a.prototype=s.prototype;var rn={};!function(){var t={0:1,length:1};rn.spliceObjects=(Ce.splice.call(t,0,1),!t[0])}(),s.templateSettings={escape:/<@-([\s\S]+?)@>/g,evaluate:/<@([\s\S]+?)@>/g,interpolate:ye,variable:""};var on=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array&&(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  ");var n=[];return t.useHas&&t.keys?(e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  "):(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  "),t.array&&(e+="\n}"),e+=t.bottom+";\nreturn result"};Ve||(c=function(){function t(){}return function(e){if(q(e)){t.prototype=e;var n=new t;t.prototype=null}return n||Ne.Object()}}()),k(arguments)||(k=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Le.call(t,"callee")&&!Xe.call(t,"callee")||!1});var sn=Ge||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&qe.call(t)==we||!1},an=function(t){var e,n=t,r=[];if(!n)return r;if(!$e[typeof t])return r;for(e in n)Le.call(n,e)&&r.push(e);return r},un=Ye?function(t){return q(t)?Ye(t):[]}:an,ln={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:!1,keys:un,loop:"if (callback(iterable[index], index, collection) === false) return result"},cn={top:"if (!objectTypes[typeof iterable]) return result;\n"+ln.top,array:!1},hn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},fn=N(hn),pn=RegExp("("+un(fn).join("|")+")","g"),dn=RegExp("["+un(hn).join("")+"]","g"),vn=function(){Oe.array=Oe.bottom=Oe.loop=Oe.top="",Oe.init="iterable",Oe.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)Oe[n]=t[n];var r=Oe.args;return Oe.firstArg=/^[^,]+/.exec(r)[0],Function("baseCreateCallback, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, stringClass, stringProto, toString","return function("+r+") {\n"+on(Oe)+"\n}")(h,Le,pe,k,sn,L,Oe.keys,Fe,$e,Ae,Ue,qe)}(ln,cn,{useHas:!1}),gn=function(t,e){var n,r=t,i=r;if(!r)return i;if(!$e[typeof r])return i;for(var o=-1,s=$e[typeof r]&&un(r),a=s?s.length:0;++o<a;)if(n=s[o],!1===e(r[n],n,t))return i;return i};M(/x/)&&(M=function(t){return"function"==typeof t&&"[object Function]"==qe.call(t)});var yn=De?function(t){if(!t||qe.call(t)!=Te)return!1;var e=t.valueOf,n=E(e)&&(n=De(e))&&De(n);return n?t==n||De(t)==n:j(t)}:j,mn=b(function(t,e,n){Le.call(t,n)?t[n]++:t[n]=1}),bn=b(function(t,e,n){(Le.call(t,n)?t[n]:t[n]=[]).push(e)}),_n=b(function(t,e,n){t[n]=e}),wn=st,xn=E(xn=Date.now)&&xn||function(){return(new Date).getTime()};return s.after=Ct,s.bind=Ft,s.bindAll=Ut,s.chain=se,s.compact=bt,s.compose=Mt,s.countBy=mn,s.debounce=qt,s.defaults=O,s.defer=Bt,s.delay=zt,s.difference=_t,s.filter=tt,s.flatten=xt,s.forEach=rt,s.forIn=vn,s.functions=$,s.groupBy=bn,s.indexBy=_n,s.initial=jt,s.intersection=Tt,s.invert=N,s.invoke=ot,s.keys=un,s.map=st,s.max=at,s.memoize=Jt,s.merge=X,s.min=ut,s.omit=V,s.once=Dt,s.pairs=G,s.partial=Lt,s.pick=K,s.pluck=wn,s.range=St,s.reject=ht,s.rest=Ot,s.shuffle=pt,s.sortBy=gt,s.tap=ae,s.throttle=Wt,s.times=re,s.toArray=yt,s.union=It,s.uniq=Nt,s.values=Q,s.where=mt,s.without=Pt,s.wrap=Xt,s.zip=Ht,s.collect=st,s.drop=Ot,s.each=rt,s.extend=A,s.methods=$,s.object=Rt,s.select=tt,s.tail=Ot,s.unique=Nt,s.clone=S,s.contains=Y,s.escape=Gt,s.every=Z,s.find=et,s.has=I,s.identity=Kt,s.indexOf=Et,s.isArguments=k,s.isArray=sn,s.isBoolean=P,s.isDate=H,s.isElement=R,s.isEmpty=C,s.isEqual=F,s.isFinite=U,s.isFunction=M,s.isNaN=B,s.isNull=z,s.isNumber=J,s.isObject=q,s.isRegExp=D,s.isString=L,s.isUndefined=W,s.lastIndexOf=At,s.mixin=Qt,s.noConflict=Yt,s.random=te,s.reduce=lt,s.reduceRight=ct,s.result=ee,s.size=dt,s.some=vt,s.sortedIndex=$t,s.template=ne,s.unescape=ie,s.uniqueId=oe,s.all=Z,s.any=vt,s.detect=et,s.findWhere=nt,s.foldl=lt,s.foldr=ct,s.include=Y,s.inject=lt,s.first=wt,s.last=kt,s.sample=ft,s.take=wt,s.head=wt,Qt(s),s.VERSION="2.4.1",s.prototype.chain=ue,s.prototype.value=le,rt(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=Ce[t];s.prototype[t]=function(){var t=this.__wrapped__;return e.apply(t,arguments),rn.spliceObjects||0!==t.length||delete t[0],this}}),rt(["concat","join","slice"],function(t){var e=Ce[t];s.prototype[t]=function(){var t=this.__wrapped__,n=e.apply(t,arguments);return this.__chain__&&(n=new a(n),n.__chain__=!0),n}}),s}),define("fb/backbone",["fb/jquery","fb/lodash"],function(t,e){"use strict";var n=window,r={},i=n.Backbone,o=[],s=o.slice;r.VERSION="1.1.2",r.$=t,r.noConflict=function(){return n.Backbone=i,this},r.emulateHTTP=!1,r.emulateJSON=!1;var a=r.Events={on:function(t,e,n){return l(this,"on",t,[e,n])&&e?(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this}),this):this},once:function(t,n,r){if(!l(this,"once",t,[n,r])||!n)return this;var i=this,o=e.once(function(){i.off(t,o),n.apply(this,arguments)});return o._callback=n,this.on(t,o,r)},off:function(t,n,r){var i,o,s,a,u,c,h,f;if(!this._events||!l(this,"off",t,[n,r]))return this;if(!t&&!n&&!r)return this._events=void 0,this;for(a=t?[t]:e.keys(this._events),u=0,c=a.length;u<c;u++)if(t=a[u],s=this._events[t]){if(this._events[t]=i=[],n||r)for(h=0,f=s.length;h<f;h++)o=s[h],(n&&n!==o.callback&&n!==o.callback._callback||r&&r!==o.context)&&i.push(o);i.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!l(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&c(n,e),r&&c(r,arguments),this},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var o=!n&&!r;r||"object"!=typeof n||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(n,r,this),(o||e.isEmpty(t._events))&&delete this._listeningTo[s];return this}},u=/\s+/,l=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},c=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e);return}},h={listenTo:"on",listenToOnce:"once"};e.each(h,function(t,n){a[n]=function(n,r,i){return(this._listeningTo||(this._listeningTo={}))[n._listenId||(n._listenId=e.uniqueId("l"))]=n,i||"object"!=typeof r||(i=this),n[t](r,i,this),this}}),a.bind=a.on,a.unbind=a.off,e.extend(r,a);var f=r.Model=function(t,n){var r=t||{};n||(n={}),this.cid=e.uniqueId("c"),this.attributes={},n.collection&&(this.collection=n.collection),n.parse&&(r=this.parse(r,n)||{}),r=e.defaults({},r,e.result(this,"defaults")),this.set(r,n),this.changed={},this.initialize.apply(this,arguments)};e.extend(f.prototype,a,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return e.clone(this.attributes)},sync:function(){return r.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return e.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,n,r){var i,o,s,a,u,l,c,h;if(null==t)return this;if("object"==typeof t?(o=t,r=n):(o={})[t]=n,r||(r={}),!this._validate(o,r))return!1;s=r.unset,u=r.silent,a=[],l=this._changing,this._changing=!0,l||(this._previousAttributes=e.clone(this.attributes),this.changed={}),h=this.attributes,c=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(i in o)n=o[i],e.isEqual(h[i],n)||a.push(i),e.isEqual(c[i],n)?delete this.changed[i]:this.changed[i]=n,s?delete h[i]:h[i]=n;if(!u){a.length&&(this._pending=r);for(var f=0,p=a.length;f<p;f++)this.trigger("change:"+a[f],this,h[a[f]],r)}if(l)return this;if(!u)for(;this._pending;)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(t,n){return this.set(t,void 0,e.extend({},n,{unset:!0}))},clear:function(t){var n={};for(var r in this.attributes)n[r]=void 0;return this.set(n,e.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!e.isEmpty(this.changed):e.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&e.clone(this.changed);var n,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var o in t)e.isEqual(i[o],n=t[o])||((r||(r={}))[o]=n);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return e.clone(this._previousAttributes)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0);var n=this,r=t.success;return t.success=function(e){if(!n.set(n.parse(e,t),t))return!1;r&&r(n,e,t),n.trigger("sync",n,e,t)},F(this,t),this.sync("read",this,t)},save:function(t,n,r){var i,o,s,a=this.attributes;if(null==t||"object"==typeof t?(i=t,r=n):(i={})[t]=n,r=e.extend({validate:!0},r),i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=e.extend({},a,i)),void 0===r.parse&&(r.parse=!0);var u=this,l=r.success;return r.success=function(t){u.attributes=a;var n=u.parse(t,r);if(r.wait&&(n=e.extend(i||{},n)),e.isObject(n)&&!u.set(n,r))return!1;l&&l(u,t,r),u.trigger("sync",u,t,r)},F(this,r),o=this.isNew()?"create":r.patch?"patch":"update","patch"===o&&(r.attrs=i),s=this.sync(o,this,r),i&&r.wait&&(this.attributes=a),s},destroy:function(t){t=t?e.clone(t):{};var n=this,r=t.success,i=function(){n.trigger("destroy",n,n.collection,t)};if(t.success=function(e){(t.wait||n.isNew())&&i(),r&&r(n,e,t),n.isNew()||n.trigger("sync",n,e,t)},this.isNew())return t.success(),!1;F(this,t);var o=this.sync("delete",this,t);return t.wait||i(),o},url:function(){var t=e.result(this,"urlRoot")||e.result(this.collection,"url")||C();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},e.extend(t||{},{validate:!0}))},_validate:function(t,n){if(!n.validate||!this.validate)return!0;t=e.extend({},this.attributes,t);var r=this.validationError=this.validate(t,n)||null;return!r||(this.trigger("invalid",this,r,e.extend(n,{validationError:r})),!1)}});var p=["keys","values","pairs","invert","pick","omit"];e.each(p,function(t){f.prototype[t]=function(){var n=s.call(arguments);return n.unshift(this.attributes),e[t].apply(e,n)}});var d=r.Collection=function(t,n){n||(n={}),n.model&&(this.model=n.model),void 0!==n.comparator&&(this.comparator=n.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,e.extend({silent:!0},n))},v={add:!0,remove:!0,merge:!0},g={add:!0,remove:!1};e.extend(d.prototype,a,{model:f,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return r.sync.apply(this,arguments)},add:function(t,n){return this.set(t,e.extend({merge:!1},n,g))},remove:function(t,n){var r=!e.isArray(t);t=r?[t]:e.clone(t),n||(n={});var i,o,s,a;for(i=0,o=t.length;i<o;i++)(a=t[i]=this.get(t[i]))&&(delete this._byId[a.id],delete this._byId[a.cid],s=this.indexOf(a),this.models.splice(s,1),this.length--,n.silent||(n.index=s,a.trigger("remove",a,this,n)),this._removeReference(a,n));return r?t[0]:t},set:function(t,n){n=e.defaults({},n,v),n.parse&&(t=this.parse(t,n));var r=!e.isArray(t);t=r?t?[t]:[]:e.clone(t);var i,o,s,a,u,l,c,h=n.at,p=this.model,d=this.comparator&&null==h&&!1!==n.sort,g=e.isString(this.comparator)?this.comparator:null,y=[],m=[],b={},_=n.add,w=n.merge,x=n.remove,E=!(d||!_||!x)&&[];for(i=0,o=t.length;i<o;i++){if(u=t[i]||{},s=u instanceof f?a=u:u[p.prototype.idAttribute||"id"],l=this.get(s))x&&(b[l.cid]=!0),w&&(u=u===a?a.attributes:u,n.parse&&(u=l.parse(u,n)),l.set(u,n),d&&!c&&l.hasChanged(g)&&(c=!0)),t[i]=l;else if(_){if(!(a=t[i]=this._prepareModel(u,n)))continue;y.push(a),this._addReference(a,n)}a=l||a,!E||!a.isNew()&&b[a.id]||E.push(a),b[a.id]=!0}if(x){for(i=0,o=this.length;i<o;++i)b[(a=this.models[i]).cid]||m.push(a);m.length&&this.remove(m,n)}if(y.length||E&&E.length)if(d&&(c=!0),this.length+=y.length,null!=h)for(i=0,o=y.length;i<o;i++)this.models.splice(h+i,0,y[i]);else{E&&(this.models.length=0);var j=E||y;for(i=0,o=j.length;i<o;i++)this.models.push(j[i])}if(c&&this.sort({silent:!0}),!n.silent){for(i=0,o=y.length;i<o;i++)(a=y[i]).trigger("add",a,this,n);(c||E&&E.length)&&this.trigger("sort",this,n)}return r?t[0]:t},reset:function(t,n){n||(n={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],n);return n.previousModels=this.models,this._reset(),t=this.add(t,e.extend({silent:!0},n)),n.silent||this.trigger("reset",this,n),t},push:function(t,n){return this.add(t,e.extend({at:this.length},n))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,n){return this.add(t,e.extend({at:0},n))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return s.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,n){return e.isEmpty(t)?n?void 0:[]:this[n?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),e.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(e.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return e.invoke(this.models,"get",t)},fetch:function(t){t=t?e.clone(t):{},void 0===t.parse&&(t.parse=!0)
;var n=t.success,r=this;return t.success=function(e){var i=t.reset?"reset":"set";r[i](e,t),n&&n(r,e,t),r.trigger("sync",r,e,t)},F(this,t),this.sync("read",this,t)},create:function(t,n){if(n=n?e.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var r=this,i=n.success;return n.success=function(t,e){n.wait&&r.add(t,n),i&&i(t,e,n)},t.save(null,n),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,n){if(t instanceof f)return t;n=n?e.clone(n):{},n.collection=this;var r=new this.model(t,n);return r.validationError?(this.trigger("invalid",this,r.validationError,n),!1):r},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var y=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];e.each(y,function(t){d.prototype[t]=function(){var n=s.call(arguments);return n.unshift(this.models),e[t].apply(e,n)}});var m=["groupBy","countBy","sortBy","indexBy"];e.each(m,function(t){d.prototype[t]=function(n,r){var i=e.isFunction(n)?n:function(t){return t.get(n)};return e[t](this.models,i,r)}});var b=r.View=function(t){this.cid=e.uniqueId("view"),t||(t={}),e.extend(this,e.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},_=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];e.extend(b.prototype,a,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,e){return this.$el&&this.undelegateEvents(),this.$el=t instanceof r.$?t:r.$(t),this.el=this.$el[0],!1!==e&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=e.result(this,"events")))return this;this.undelegateEvents();for(var n in t){var r=t[n];if(e.isFunction(r)||(r=this[t[n]]),r){var i=n.match(_),o=i[1],s=i[2];r=e.bind(r,this),o+=".delegateEvents"+this.cid,""===s?this.$el.on(o,r):this.$el.on(o,s,r)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"),!1);else{var t=e.extend({},e.result(this,"attributes"));this.id&&(t.id=e.result(this,"id")),this.className&&(t.class=e.result(this,"className"));var n=r.$("<"+e.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),r.sync=function(t,n,i){var o=E[t];e.defaults(i||(i={}),{emulateHTTP:r.emulateHTTP,emulateJSON:r.emulateJSON});var s={type:o,dataType:"json"};if(i.url||(s.url=e.result(n,"url")||C()),null!=i.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(s.contentType="application/json",s.data=JSON.stringify(i.attrs||n.toJSON(i))),i.emulateJSON&&(s.contentType="application/x-www-form-urlencoded",s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){s.type="POST",i.emulateJSON&&(s.data._method=o);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===s.type||i.emulateJSON||(s.processData=!1),"PATCH"===s.type&&x&&(s.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var u=i.xhr=r.ajax(e.extend(s,i));return n.trigger("request",n,u,i),u};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};r.ajax=function(){return r.$.ajax.apply(r.$,arguments)};var j=r.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,A=/\*\w+/g,S=/[\-{}\[\]+?.,\\\^$|#\s]/g;e.extend(j.prototype,a,{initialize:function(){},route:function(t,n,i){e.isRegExp(t)||(t=this._routeToRegExp(t)),e.isFunction(n)&&(i=n,n=""),i||(i=this[n]);var o=this;return r.history.route(t,function(e){var s=o._extractParameters(t,e);o.execute(i,s),o.trigger.apply(o,["route:"+n].concat(s)),o.trigger("route",n,s),r.history.trigger("route",o,n,s)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,e){return r.history.navigate(t,e),this},_bindRoutes:function(){if(this.routes){this.routes=e.result(this,"routes");for(var t,n=e.keys(this.routes);null!=(t=n.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(S,"\\$&").replace(T,"(?:$1)?").replace(k,function(t,e){return e?t:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,n){var r=t.exec(n).slice(1);return e.map(r,function(t,e){return e===r.length-1?t||null:t?decodeURIComponent(t):null})}});var O=r.History=function(){this.handlers=[],e.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},$=/^[#\/]|\s+$/g,I=/^\/+|\/+$/g,N=/msie [\w.]+/,P=/\/$/,H=/#.*$/;O.started=!1,e.extend(O.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(P,"");t.indexOf(n)||(t=t.slice(n.length))}else t=this.getHash();return t.replace($,"")},start:function(t){if(O.started)throw new Error("Backbone.history has already been started");O.started=!0,this.options=e.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),i=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);if(this.root=("/"+this.root+"/").replace(I,"/"),o&&this._wantsHashChange){var s=r.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=s.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?r.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?r.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var a=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&a.hash&&(this.fragment=this.getHash().replace($,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){r.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),O.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return t=this.fragment=this.getFragment(t),e.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!O.started)return!1;e&&!0!==e||(e={trigger:!!e});var n=this.root+(t=this.getFragment(t||""));if(t=t.replace(H,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==n&&(n=n.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var r=t.href.replace(/(javascript:|#).*$/,"");t.replace(r+"#"+e)}else t.hash="#"+e}}),r.history=new O;var R=function(t,n){var r,i=this;r=t&&e.has(t,"constructor")?t.constructor:function(){return i.apply(this,arguments)},e.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,t&&e.extend(r.prototype,t),r.__super__=i.prototype,r};f.extend=d.extend=j.extend=b.extend=O.extend=R;var C=function(){throw new Error('A "url" property or function must be specified')},F=function(t,e){var n=e.error;e.error=function(r){n&&n(t,r,e),t.trigger("error",t,r,e)}};return r.noConflict()});