define("fb/text!fb/language/template.html",[],function(){return'<form>\n\t<label for="select-country"><@=i18n[\'settings.country\']@></label>\n\t<select id="select-country" class="fb-forms-selectbox fb-settings-country">\n\t\t<@ _.each(data.countries, function(item, index){ @>\n\t\t<@ if (current.country === item.code) { @>\n\t\t<option value="<@=index@>" selected="selected"><@=item.name@></option>\n\t\t<@ } else { @>\n\t\t<option value="<@=index@>"><@=item.name@></option>\n\t\t<@ } @>\n\t\t<@ }); @>\n\t</select>\n\t<label for="select-airline"><@=i18n[\'settings.airline\']@></label>\n\t<select id="select-airline" class="fb-forms-selectbox fb-settings-airline">\n\t\t<@ _.each(data.airlines, function(item, index){ @>\n\t\t<@ if (current.airline === item.code) { @>\n\t\t<option value="<@=item.code@>" selected="selected"><@=item.name@></option>\n\t\t<@ } else { @>\n\t\t<option value="<@=item.code@>"><@=item.name@></option>\n\t\t<@ } @>\n\t\t<@ }); @>\n\t</select>\n\t<div class="label"><@=i18n[\'settings.language\']@></div>\n\t<ul class="fb-settings-language">\n\t\t<@ _.each(data.languages, function(item, index){ @>\n\t\t<@ if (current.language === item.code) { @>\n\t\t\n\n\t\t<li><a href="#" data-id="<@=item.code@>" class="fb-settings-language-link-url active" title=""><span><@=item.code@></span><@=item.name@></a></li>\n\t\t<@ } else { @>\n\t\t\n\n\t\t<li><a href="#" data-id="<@=item.code@>" class="fb-settings-language-link-url" title=""><span><@=item.code@></span><@=item.name@></a></li>\n\t\t<@ } @>\n\t\t<@ }); @>\n\t</ul>\n\t<div class="text-center">\n\t\t<input type="submit" value="<@=i18n[\'settings.save\']@>" class="fb-dev-header-login-submit fb-btn-change-language">\n\t</div>\n</form>'}),define("fb/text!fb/language/style.css",[],function(){return'.fb-settings{\nborder:1px solid #e3e9ee;\n-webkit-box-shadow:5px 5px 10px 0px rgba(0,0,0,0.15);\n-moz-box-shadow:5px 5px 10px 0px rgba(0,0,0,0.15);\nbox-shadow:5px 5px 10px 0px rgba(0,0,0,0.15);\npadding:20px 20px;\n-webkit-box-sizing:border-box;\n-moz-box-sizing:border-box;\nbox-sizing:border-box;\nborder-radius:4px;\nz-index:900;\nposition:absolute;\ntop:30px;\nright:0px;\nwidth:300px;\nbackground-color:#fff;\n}\n.fb-settings-close{\nfont-size:20px;\nposition:absolute;\nright:10px;\ntop:5px;\ncolor:#bec3c7;\n}\n.fb-settings-close:hover{\ncolor:#52b7e8;\n}\n.fb-settings-title{\ndisplay:block;\nfont-weight:bold;\npadding-bottom:5px;\nfont-size:14px;\n}\n.fb-settings-country,\n.fb-settings-airline{\nmargin:10px 0 20px;\n}\n.fb-forms-selectbox{\noutline:0;\nfont-size:12px;\nmargin:0 0 15px 0;\nline-height:15px;\nwidth:100%;\noutline:none;\npadding:6px 6px 6px 6px;\nborder:1px solid #bec3c7;\nborder-radius:2px;\n-webkit-appearance:none;\n-moz-appearance:none;\nappearance:none;\n-webkit-appearance:none;\nbackground-image:url(data:image/png;base64,R0lGODlhDQAEAIAAAAAAAP8A/yH5BAEHAAEALAAAAAANAAQAAAILhA+hG5jMDpxvhgIAOw==);\nbackground-repeat:no-repeat;\nbackground-position:right center;\nbackground-color:#fff;\npadding-right:20px;\n}\n.fb-forms-selectbox option{\npadding:2px 10px;\noutline:none;\n}\n.fb-settings-language{\nlist-style:none;\npadding:0;\nmargin:0 0 10px 0;\n-webkit-box-sizing:border-box;\n-moz-box-sizing:border-box;\nbox-sizing:border-box;\n}\n.fb-settings-language-link{\npadding-left:25px;\nline-height:20px;\ndisplay:inline-block;\n}\n.fb-settings-language-link:hover{\ntext-decoration:none;\ncolor:#042452;\n}\n.fb-settings-language-link--active:after{\ncontent:"\\e803";\nfont-family:"fbicons";\nfloat:right;\nmargin-left:7px;\nposition:relative;\ntop:-2px;\ncolor:#042452;\n}\n.fb-settings .g-btn{\nfloat:right;\n}\n.fb-language-nl{\nbackground-position:0 -7px;\n}\n.fb-language-en{\nbackground-position:0 -37px;\n}\n.fb-language-fr{\nbackground-position:0 -67px;\n}\n.fb-language-es{\nbackground-position:0 -97px;\n}\n.fb-language-it{\nbackground-position:0 -127px;\n}\n.fb-language-de{\nbackground-position:0 -157px;\n}\n.fb-language-ja{\nbackground-position:0 -187px;\n}\n.fb-language-ko{\nbackground-position:0 -217px;\n}\n.fb-language-zh,\n.fb-language-zhs{\nbackground-position:0 -247px;\n}\n.fb-language-ru{\nbackground-position:0 -277px;\n}\n.fb-language-ro{\nbackground-position:0 -307px;\n}\n@media screen and (max-width:480px){\n.fb-settings--column{\nfloat:none;\nwidth:100%;\nmargin-right:0;\n}\n.fb-settings-country{\nmax-height:160px;\nmargin-bottom:20px;\n}\n.fb-settings .fb-btn{\nmargin-top:15px;\n}\n}\n'}),define("fb/select-language",["fb/jquery","fb/lodash","fb/i18n!fb/nls/generic","fb/text!fb/language/template.html","fb/text!fb/language/style.css"],function(n,e,t,a,i){"use strict";var o,l,s=n("body"),g=e.template(a),c=null,r=null,u=window.FB&&window.FB.config||{country:"nl",language:"en",airline:"af"},b=e.clone(u),f=function(e){e.preventDefault();var t=n(e.target).val();b.country=c.countries[t].code,c.languages=c.countries[t].languages,v()},d=function(e){e.preventDefault(),b.language=n(e.target).attr("data-id"),v()},p=function(e){e.preventDefault(),b.airline=n(e.target).val(),v()},m=function(e){return e.preventDefault(),n.post("/change.html",{form_airline:b.airline,form_country:b.country,form_language:b.language,location:"require"},function(){location.reload()}),!1},x=function(){o.on("change",".fb-settings-country",f),o.on("change",".fb-settings-airline",p),o.on("click",".fb-settings-language-link-url",d),o.on("click",".fb-btn-change-language",m)},h=function(){o.off("click",".fb-settings-country-item",f),o.off("change",".fb-settings-airline",p),o.off("click",".fb-settings-language-link-url",d),o.off("click",".fb-btn-change-language",m)},v=function(){var n=g({i18n:t,current:b,data:c});o.empty().append(n).fadeIn()},k=function(){n.ajax({url:"https://www.flyingblue.com/api/languages.json",data:{language:b.language,country:b.country}}).success(function(n){c=n;for(var e=c.countries,t=0,a=e.length;t<a;t++)if(e[t].code===b.country){c.languages=l=e[t].languages;break}v()})},y=function(){x(),c?v():k()},A=function(e){e.preventDefault(),o.fadeIn(),y(),n(".fb-my-account-member-menu")&&"block"==n(".fb-my-account-member-menu").css("display")&&(console.log("hide-menu"),n(".fb-my-account-member-menu").hide(),n(".fb-user-show-menu").removeClass("fb-user-active").addClass("fb-user-inactive")),n(".fb-dev-header-login")&&"block"==n(".fb-dev-header-login").css("display")&&(n(".fb-dev-header-login").hide(),n(".fb-sign-in--mobile").toggleClass("close-mobile-user-menu"))},w=function(n){n.preventDefault(),b=e.clone(u),c.languages=l,h(),o.fadeOut()},z=function(e){r=e.offset(),document.getElementById("fb-css-language")||s.append('<style type="text/css" id="fb-css-language">'+i+"</style>"),o=n('<div class="'+e.data("class")+'"></div>'),n("."+e.data("append")).append(o),e.on("click",A),o.on("click",".fb-settings-close",w),y(),n(".fb-my-account-member-menu")&&"block"==n(".fb-my-account-member-menu").css("display")&&(console.log("hide-menu"),n(".fb-my-account-member-menu").hide(),n(".fb-user-show-menu").removeClass("fb-user-active").addClass("fb-user-inactive")),n(".fb-dev-header-login")&&"block"==n(".fb-dev-header-login").css("display")&&(n(".fb-dev-header-login").hide(),n(".fb-sign-in--mobile").toggleClass("close-mobile-user-menu"))};return n(document).on({"mousedown touchevent":function(e){var t=(n(e.target),n(".language-selector:visible"));0!=t.length&&(n.contains(t[0],e.target)||t.hide())}}),{init:z}});